"use strict";(self.webpackChunkmongodb_rag_docs=self.webpackChunkmongodb_rag_docs||[]).push([[7522],{9947:function(s,e,a){a.r(e),a.d(e,{default:function(){return u}});var t=a(6540),n=a(1410),o=a(8746),r=a(7522),i=a(3081),c=a(2976),l=(a(5531),a(4848));function d(){const[s,e]=(0,t.useState)([{role:"assistant",content:"Hi! I'm the MongoDB-RAG chatbot. Ask me anything about using MongoDB-RAG!"}]),[a,n]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),g=(0,t.useRef)(null),j=(0,t.useRef)(null);(0,t.useEffect)((()=>{g.current?.scrollIntoView({behavior:"smooth"})}),[s]),(0,t.useEffect)((()=>{j.current?.focus()}),[]),(0,t.useEffect)((()=>{const s=localStorage.getItem("mongodbRagChatSession");if(s)try{const{sid:a,msgs:t}=JSON.parse(s);a&&Array.isArray(t)&&(m(a),e(t))}catch(a){console.error("Error loading saved session",a)}}),[]),(0,t.useEffect)((()=>{h&&localStorage.setItem("mongodbRagChatSession",JSON.stringify({sid:h,msgs:s}))}),[h,s]);return(0,l.jsxs)("div",{className:"chatbot-container",children:[(0,l.jsx)("div",{className:"messages-area",children:(0,l.jsxs)("div",{className:"messages-container",children:[s.map(((s,e)=>(0,l.jsxs)("div",{className:`message ${s.role}`,children:[(0,l.jsx)("div",{className:"message-avatar",children:"assistant"===s.role?"\ud83e\udd16":"\ud83d\udc64"}),(0,l.jsx)("div",{className:"message-content",children:"assistant"===s.role?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.oz,{rehypePlugins:[r.A,i.A],remarkPlugins:[c.A],children:s.content}),s.sources&&s.sources.length>0&&(0,l.jsx)("div",{className:"sources",children:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:"Sources"}),(0,l.jsx)("ul",{children:s.sources.map(((s,e)=>(0,l.jsxs)("li",{children:[s.metadata?.title||"Document",(0,l.jsxs)("span",{className:"score",children:[Math.round(100*s.score),"% match"]})]},e)))})]})})]}):(0,l.jsx)("div",{children:s.content})})]},e))),d&&(0,l.jsxs)("div",{className:"message assistant",children:[(0,l.jsx)("div",{className:"message-avatar",children:"\ud83e\udd16"}),(0,l.jsx)("div",{className:"message-content",children:(0,l.jsxs)("div",{className:"loading-indicator",children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})})]}),(0,l.jsx)("div",{ref:g})]})}),(0,l.jsx)("div",{className:"input-area",children:(0,l.jsxs)("div",{className:"input-container",children:[(0,l.jsx)("button",{onClick:()=>{e([{role:"assistant",content:"Hi! I'm the MongoDB-RAG chatbot. Ask me anything about using MongoDB-RAG!"}]),m(null),localStorage.removeItem("mongodbRagChatSession"),j.current?.focus()},className:"clear-button",children:"Clear Chat"}),(0,l.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!a.trim())return;const o={role:"user",content:a};e((s=>[...s,o])),n(""),u(!0);try{const t=await fetch("http://localhost:5002/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:a,sessionId:h,history:h?void 0:s})}),n=await t.json();n.sessionId&&!h&&m(n.sessionId),e((s=>[...s,{role:"assistant",content:n.answer,sources:n.sources}]))}catch(r){console.error("Error:",r),e((s=>[...s,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}]))}finally{u(!1)}},className:"input-form",children:[(0,l.jsx)("input",{ref:j,type:"text",value:a,onChange:s=>n(s.target.value),placeholder:"Ask about MongoDB-RAG...",className:"chat-input",disabled:d}),(0,l.jsx)("button",{type:"submit",className:"send-button",disabled:d||!a.trim(),children:"Send"})]})]})})]})}function u(){return(0,l.jsx)(n.A,{title:"MongoDB-RAG Chatbot",description:"Ask questions about MongoDB-RAG and get instant answers",wrapperClassName:"chatbot-page-layout",children:(0,l.jsxs)("div",{className:"chatbot-page",children:[(0,l.jsxs)("header",{className:"chatbot-header",children:[(0,l.jsx)("h1",{children:"MongoDB-RAG Chatbot"}),(0,l.jsx)("p",{children:"Ask questions about MongoDB-RAG, implementation details, or how to use the library"})]}),(0,l.jsx)(d,{}),(0,l.jsx)("div",{className:"beta-badge",children:"Beta"})]})})}}}]);